<!-- Desktop Pagination Controls -->
<div
  x-show="!isLoading && filteredDevices.length > 0"
  class="px-4 py-3 flex items-center justify-between border-t border-light-gray"
>
  <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
    <div>
      <p class="text-sm text-slate-gray">
        Showing
        <span
          class="font-medium text-charcoal"
          x-text="(currentPage - 1) * pageSize + 1"
        ></span>
        to
        <span
          class="font-medium text-charcoal"
          x-text="Math.min(currentPage * pageSize, filteredDevices.length)"
        ></span>
        of
        <span
          class="font-medium text-charcoal"
          x-text="filteredDevices.length"
        ></span>
        results
      </p>
    </div>
    <div>
      <nav
        class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px"
        aria-label="Pagination"
      >
        <button
          @click="goToFirstPage()"
          :disabled="currentPage === 1"
          class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-light-gray bg-white text-sm font-medium text-slate-gray hover:bg-eco-green-5 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span class="sr-only">First</span>
          <svg
            class="h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <button
          @click="previousPage()"
          :disabled="currentPage === 1"
          class="relative inline-flex items-center px-2 py-2 border border-light-gray bg-white text-sm font-medium text-slate-gray hover:bg-eco-green-5 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span class="sr-only">Previous</span>
          <svg
            class="h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
              clip-rule="evenodd"
            />
          </svg>
        </button>

        <!-- Page Numbers -->
        <template x-for="pageNumber in paginationRange" :key="pageNumber">
          <button
            @click="goToPage(pageNumber)"
            :class="{'bg-eco-green-10 text-eco-green': currentPage === pageNumber, 'bg-white text-slate-gray': currentPage !== pageNumber}"
            class="relative inline-flex items-center px-4 py-2 border border-light-gray text-sm font-medium hover:bg-eco-green-5"
          >
            <span x-text="pageNumber"></span>
          </button>
        </template>

        <button
          @click="nextPage()"
          :disabled="currentPage >= totalPages"
          class="relative inline-flex items-center px-2 py-2 border border-light-gray bg-white text-sm font-medium text-slate-gray hover:bg-eco-green-5 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span class="sr-only">Next</span>
          <svg
            class="h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <button
          @click="goToLastPage()"
          :disabled="currentPage >= totalPages"
          class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-light-gray bg-white text-sm font-medium text-slate-gray hover:bg-eco-green-5 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span class="sr-only">Last</span>
          <svg
            class="h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </nav>
    </div>
  </div>

  <!-- Mobile Pagination Controls -->
  <div class="flex justify-between w-full sm:hidden">
    <button
      @click="previousPage()"
      :disabled="currentPage === 1"
      class="relative inline-flex items-center px-4 py-2 border border-light-gray text-sm font-medium rounded-md text-slate-gray bg-white hover:bg-eco-green-5 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Previous
    </button>
    <span class="text-sm text-slate-gray">
      Page
      <span class="font-medium text-charcoal" x-text="currentPage"></span>
      of
      <span class="font-medium text-charcoal" x-text="totalPages"></span>
    </span>
    <button
      @click="nextPage()"
      :disabled="currentPage >= totalPages"
      class="relative inline-flex items-center px-4 py-2 border border-light-gray text-sm font-medium rounded-md text-slate-gray bg-white hover:bg-eco-green-5 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Next
    </button>
  </div>
</div>
