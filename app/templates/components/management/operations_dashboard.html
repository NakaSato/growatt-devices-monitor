<!-- Operations Dashboard Component -->
<div class="space-y-6">
  <!-- Header and Summary Section -->
  <div class="bg-white shadow rounded-lg p-4 sm:p-6">
    <div class="md:flex md:items-center md:justify-between mb-4">
      <h2 class="text-xl font-bold leading-tight text-gray-900">
        Operations Dashboard
      </h2>
      <div class="mt-3 md:mt-0">
        <div class="inline-flex items-center text-gray-500 text-sm">
          <span>Last updated: </span>
          <span
            x-text="new Date().toLocaleString()"
            class="ml-1 font-medium"
          ></span>
        </div>
      </div>
    </div>

    <!-- Key Metrics Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
      <!-- Total Plants -->
      <div class="bg-green-50 border border-green-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="flex-shrink-0 bg-green-100 rounded-full p-3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-green-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              />
            </svg>
          </div>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-800">Active Plants</h3>
            <p
              class="text-2xl font-bold"
              x-text="operationsData.plantStats?.activeCount || 0"
            ></p>
            <p class="text-sm text-gray-600">
              Out of
              <span x-text="operationsData.plantStats?.totalCount || 0"></span>
              total
            </p>
          </div>
        </div>
      </div>

      <!-- Device Health -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="flex-shrink-0 bg-blue-100 rounded-full p-3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-blue-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
              />
            </svg>
          </div>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-800">Online Devices</h3>
            <p
              class="text-2xl font-bold"
              x-text="operationsData.deviceStats?.onlineCount || 0"
            ></p>
            <p class="text-sm text-gray-600">
              Out of
              <span x-text="operationsData.deviceStats?.totalCount || 0"></span>
              total
            </p>
          </div>
        </div>
      </div>

      <!-- Total Production -->
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="flex-shrink-0 bg-yellow-100 rounded-full p-3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-yellow-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 10V3L4 14h7v7l9-11h-7z"
              />
            </svg>
          </div>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-800">Today's Energy</h3>
            <p
              class="text-2xl font-bold"
              x-text="(operationsData.energyStats?.todayKwh || 0) + ' kWh'"
            ></p>
            <p class="text-sm text-gray-600">
              <span
                x-show="operationsData.energyStats?.percentChange > 0"
                class="text-green-600"
                >↑</span
              >
              <span
                x-show="operationsData.energyStats?.percentChange < 0"
                class="text-red-600"
                >↓</span
              >
              <span
                x-text="Math.abs(operationsData.energyStats?.percentChange || 0) + '%'"
              ></span>
              vs yesterday
            </p>
          </div>
        </div>
      </div>

      <!-- Alerts -->
      <div class="bg-red-50 border border-red-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="flex-shrink-0 bg-red-100 rounded-full p-3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-red-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
              />
            </svg>
          </div>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-800">Active Alerts</h3>
            <p class="text-2xl font-bold" x-text="alerts.length || 0"></p>
            <p class="text-sm text-gray-600">
              <span
                x-text="operationsData.alertStats?.criticalCount || 0"
              ></span>
              critical
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Operations Overview Charts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Energy Production Chart -->
      <div class="bg-white border rounded-lg p-4">
        <h3 class="text-lg font-medium text-gray-800 mb-4">
          Energy Production Trend (Last 7 Days)
        </h3>
        <div class="h-64">
          <canvas id="energyProductionChart"></canvas>
        </div>
      </div>

      <!-- Device Status Chart -->
      <div class="bg-white border rounded-lg p-4">
        <h3 class="text-lg font-medium text-gray-800 mb-4">
          Device Status Distribution
        </h3>
        <div class="h-64">
          <canvas id="deviceStatusChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity and Alerts Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Recent Maintenance Activities -->
    <div class="bg-white shadow rounded-lg p-4 sm:p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-900">
          Recent Maintenance Activities
        </h3>
        <a
          href="#"
          class="text-sm font-medium text-primary-600 hover:text-primary-800"
          >View all</a
        >
      </div>
      <div class="flow-root">
        <ul class="divide-y divide-gray-200">
          <template
            x-for="(task, index) in maintenanceTasks.slice(0, 5)"
            :key="index"
          >
            <li class="py-3">
              <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                  <span
                    class="inline-flex items-center justify-center h-8 w-8 rounded-full"
                    :class="{
                          'bg-green-100': task.status === 'completed',
                          'bg-yellow-100': task.status === 'in-progress',
                          'bg-red-100': task.status === 'pending'
                        }"
                  >
                    <span
                      class="text-sm font-medium"
                      :class="{
                            'text-green-800': task.status === 'completed',
                            'text-yellow-800': task.status === 'in-progress',
                            'text-red-800': task.status === 'pending'
                          }"
                      x-text="task.status.charAt(0).toUpperCase()"
                    ></span>
                  </span>
                </div>
                <div class="flex-1 min-w-0">
                  <p
                    class="text-sm font-medium text-gray-900 truncate"
                    x-text="task.title"
                  ></p>
                  <p
                    class="text-sm text-gray-500 truncate"
                    x-text="task.description"
                  ></p>
                </div>
                <div
                  class="text-sm text-gray-500 whitespace-nowrap"
                  x-text="new Date(task.date).toLocaleDateString()"
                ></div>
              </div>
            </li>
          </template>
          <li x-show="maintenanceTasks.length === 0" class="py-4">
            <p class="text-sm text-gray-500 text-center">
              No maintenance activities found
            </p>
          </li>
        </ul>
      </div>
    </div>

    <!-- Recent Alerts -->
    <div class="bg-white shadow rounded-lg p-4 sm:p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-900">Recent Alerts</h3>
        <a
          href="#"
          @click.prevent="activeTab = 'alerts'"
          class="text-sm font-medium text-primary-600 hover:text-primary-800"
          >View all</a
        >
      </div>
      <div class="flow-root">
        <ul class="divide-y divide-gray-200">
          <template x-for="(alert, index) in alerts.slice(0, 5)" :key="index">
            <li class="py-3">
              <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                  <span
                    class="inline-flex items-center justify-center h-8 w-8 rounded-full"
                    :class="{
                          'bg-red-100': alert.severity === 'critical',
                          'bg-orange-100': alert.severity === 'high',
                          'bg-yellow-100': alert.severity === 'medium',
                          'bg-blue-100': alert.severity === 'low'
                        }"
                  >
                    <span
                      class="text-sm font-medium"
                      :class="{
                            'text-red-800': alert.severity === 'critical',
                            'text-orange-800': alert.severity === 'high',
                            'text-yellow-800': alert.severity === 'medium',
                            'text-blue-800': alert.severity === 'low'
                          }"
                      x-text="alert.severity.charAt(0).toUpperCase()"
                    ></span>
                  </span>
                </div>
                <div class="flex-1 min-w-0">
                  <p
                    class="text-sm font-medium text-gray-900 truncate"
                    x-text="alert.title"
                  ></p>
                  <p
                    class="text-sm text-gray-500 truncate"
                    x-text="alert.message"
                  ></p>
                </div>
                <div
                  class="text-sm text-gray-500 whitespace-nowrap"
                  x-text="new Date(alert.timestamp).toLocaleString()"
                ></div>
              </div>
            </li>
          </template>
          <li x-show="alerts.length === 0" class="py-4">
            <p class="text-sm text-gray-500 text-center">No alerts found</p>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Action Buttons Section -->
  <div class="bg-white shadow rounded-lg p-4 sm:p-6">
    <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h3>
    <div
      class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"
    >
      <button
        class="flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-primary-600 mb-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          />
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
          />
        </svg>
        <span class="text-sm font-medium text-gray-700">Check Status</span>
      </button>

      <button
        class="flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-primary-600 mb-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
          />
        </svg>
        <span class="text-sm font-medium text-gray-700">Sync Data</span>
      </button>

      <button
        class="flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-primary-600 mb-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
          />
        </svg>
        <span class="text-sm font-medium text-gray-700">Generate Report</span>
      </button>

      <button
        class="flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-primary-600 mb-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
          />
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
        <span class="text-sm font-medium text-gray-700">Configure</span>
      </button>

      <button
        class="flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-primary-600 mb-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
          />
        </svg>
        <span class="text-sm font-medium text-gray-700">Data Backup</span>
      </button>

      <button
        class="flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-primary-600 mb-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span class="text-sm font-medium text-gray-700">Help & Docs</span>
      </button>
    </div>
  </div>
</div>

<!-- Initialize the charts -->
<script>
  document.addEventListener("alpine:initialized", () => {
    // Sample data - this would come from the API in production
    setTimeout(() => {
      // Energy Production Chart
      const energyCtx = document
        .getElementById("energyProductionChart")
        .getContext("2d");
      new Chart(energyCtx, {
        type: "line",
        data: {
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          datasets: [
            {
              label: "Energy (kWh)",
              data: [12, 19, 15, 17, 14, 21, 16],
              backgroundColor: "rgba(16, 185, 129, 0.2)",
              borderColor: "rgba(16, 185, 129, 1)",
              borderWidth: 2,
              tension: 0.4,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      // Device Status Chart
      const deviceCtx = document
        .getElementById("deviceStatusChart")
        .getContext("2d");
      new Chart(deviceCtx, {
        type: "pie",
        data: {
          labels: ["Online", "Offline", "Maintenance", "Warning"],
          datasets: [
            {
              data: [65, 15, 12, 8],
              backgroundColor: [
                "rgba(16, 185, 129, 0.7)",
                "rgba(239, 68, 68, 0.7)",
                "rgba(245, 158, 11, 0.7)",
                "rgba(59, 130, 246, 0.7)",
              ],
              borderColor: [
                "rgba(16, 185, 129, 1)",
                "rgba(239, 68, 68, 1)",
                "rgba(245, 158, 11, 1)",
                "rgba(59, 130, 246, 1)",
              ],
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
        },
      });
    }, 500);
  });
</script>
